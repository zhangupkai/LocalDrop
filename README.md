# LocalDrop - 局域网内容分享平台

一个简单的Node.js应用，允许局域网内的设备通过Web界面分享文本内容和文件。
本项目旨在解决移动端开发测试过程中，由于测试设备存在诸多限制，无法便捷地通过第三方应用或WebRTC等方式传输测试数据的问题，提供一种基于HTTP协议的简单高效的数据传输方案。

> **🤖 AI生成项目**: 本项目完全由AI（Claude）生成，包括所有代码、样式、文档和功能实现。

## 功能特性

- 🌐 **局域网访问**: 支持局域网内所有设备访问
- 📝 **文本分享**: 提交和查看文本内容
- 📁 **文件上传**: 支持文件上传和下载（最大50MB）
- 🖼️ **图片预览**: 支持图片文件在线预览，完整显示不裁剪
- 📋 **图片复制**: 支持将图片直接复制到剪贴板
- 🔒 **滚动控制**: 图片预览时禁用背景页面滚动
- 👤 **用户标识**: 支持自定义作者/上传者名称
- 🕒 **时间戳**: 显示消息发布时间和文件上传时间
- 🔄 **实时刷新**: 自动刷新消息和文件列表
- 🗑️ **内容管理**: 支持删除单条消息/文件或清空所有内容
- 📋 **复制功能**: 支持复制单条消息或全部消息
- 📱 **响应式设计**: 支持手机、平板等移动设备
- ⌨️ **快捷键支持**: 支持键盘快捷键操作
- 🎨 **拖拽上传**: 支持拖拽文件到上传区域

## 安装和运行

### 1. 安装依赖

```bash
npm install
```

### 2. 启动服务

```bash
npm start
```

或者使用开发模式（自动重启）：

```bash
npm run dev
```

### 3. 访问应用

启动后，控制台会显示访问地址：

- **本机访问**: http://localhost:9999
- **局域网访问**: http://[你的IP地址]:9999

## 使用说明

### 文本分享
1. **提交文本**: 在"文本"标签页输入内容，可选择填写作者名称
2. **查看消息**: 在"文本消息"标签页查看所有已提交的文本
3. **复制内容**: 点击消息内容或"复制"按钮复制单条消息
4. **复制全部**: 点击"复制全部"按钮复制所有消息

### 文件分享
1. **上传文件**: 在"文件"标签页选择文件或拖拽文件到上传区域
2. **查看文件**: 在"文件"标签页查看所有已上传的文件
3. **预览图片**: 点击图片文件旁的"预览"按钮在线预览图片
   - 图片完整显示，不会被裁剪
   - 支持响应式缩放，适应不同屏幕
   - 预览时禁用背景页面滚动
4. **复制图片**: 点击图片文件旁的"复制"按钮将图片复制到剪贴板
   - 支持现代浏览器的Clipboard API
   - 自动降级为下载功能（如不支持）
5. **下载文件**: 点击文件旁的"下载"按钮下载文件
6. **删除文件**: 点击文件旁的"删除"按钮删除文件

### 通用操作
1. **刷新内容**: 点击"刷新"按钮或按F5键
2. **清空所有**: 点击"清空"按钮删除所有消息和文件
3. **切换视图**: 使用标签页在文本消息和文件列表间切换

## 快捷键

- `Ctrl + A`: 复制全部消息（仅在非输入框时）
- `Ctrl + R` 或 `F5`: 刷新内容列表
- `Ctrl + Enter`: 在文本框中按此组合键提交消息
- `ESC`: 关闭图片预览弹窗

## 技术栈

- **后端**: Node.js + Express + Multer
- **前端**: HTML5 + CSS3 + JavaScript (ES6+)
- **存储**: 内存存储（重启后数据会丢失）
- **文件存储**: 本地文件系统（uploads目录）

## 项目结构

```
LocalDrop/
├── server.js          # 主服务器文件
├── package.json       # 项目配置和依赖
├── README.md         # 项目说明
├── .gitignore        # Git忽略文件配置
├── uploads/          # 文件上传存储目录
│   └── .gitkeep     # 保持目录结构的占位文件
└── public/           # 静态文件目录
    ├── index.html    # 主页面
    ├── style.css     # 样式文件
    └── script.js     # 前端脚本
```

## API接口

### 消息相关
- `GET /api/messages` - 获取所有消息列表
- `POST /api/messages` - 提交新消息
- `DELETE /api/messages/:id` - 删除指定ID的消息
- `DELETE /api/messages` - 清空所有消息

### 文件相关
- `GET /api/files` - 获取所有文件列表
- `POST /api/files` - 上传文件
- `GET /api/files/:id/download` - 下载指定ID的文件
- `DELETE /api/files/:id` - 删除指定ID的文件
- `DELETE /api/files` - 清空所有文件

### 请求示例

**提交消息**:
```json
{
  "content": "消息内容",
  "author": "作者名称（可选）"
}
```

**上传文件**:
```
Content-Type: multipart/form-data
- file: 文件数据
- uploader: 上传者名称（可选）
```

## 注意事项

- 数据存储在内存中，重启服务后数据会丢失
- 文件存储在uploads目录中，重启服务后文件仍保留
- 默认端口为9999，如需修改请编辑server.js文件
- 文件上传大小限制为50MB
- 确保防火墙允许9999端口的访问
- 局域网内其他设备需要知道服务器的IP地址才能访问
- 支持所有文件类型的上传和下载
- 图片复制功能需要现代浏览器支持（HTTPS环境更佳）
- 移动端文件操作按钮采用垂直布局，避免挤压文件名

## Git使用说明

项目已配置`.gitignore`文件，会自动忽略以下内容：
- `node_modules/` - 依赖包目录
- `uploads/*` - 用户上传的文件（保留目录结构）
- 日志文件、临时文件、IDE配置文件等

### 首次克隆项目后
```bash
# 安装依赖
npm install

# 启动服务
npm start
```

## 功能演示

### 界面预览
- **双标签页设计**: 文本分享和文件上传分别管理
- **响应式布局**: 完美适配桌面和移动设备
- **拖拽上传**: 支持拖拽文件到上传区域
- **实时更新**: 自动刷新内容，无需手动刷新
- **图片预览**: 模态框预览，完整显示，禁用背景滚动
- **移动端优化**: 文件操作按钮垂直布局，避免界面拥挤

### 使用场景
- **团队协作**: 快速分享文档、图片等文件
- **会议记录**: 实时分享会议内容和相关资料
- **学习交流**: 分享学习资料和笔记
- **临时传输**: 局域网内快速传输文件
- **移动端开发**: 测试设备间快速传输测试数据和图片
- **设计评审**: 快速预览和分享设计图片

## 许可证

MIT License
